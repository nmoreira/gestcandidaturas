<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title><ui:insert name="titulo">Sistema padrão</ui:insert></title>
	<h:outputStylesheet library="css" name="estilos.css" />
	<h:outputScript library="js" name="script.js" />
</h:head>

<h:body>
	<p:ajaxStatus styleClass="ajax-status">
		<f:facet name="start">
			<h:graphicImage library="imagens" name="carregando.gif" />
		</f:facet>
		<f:facet name="complete">
			<h:outputText value="" />
		</f:facet>
	</p:ajaxStatus>
	<header>
	<div style="float: left;">
	<table>
	<tr>
	<td>
		<h:link outcome="/principal">
			<h:graphicImage library="imagens" name="critical.png" />
		</h:link>
		</td>
		<td valign="middle">
		<p:button value="Página inicial" outcome="/paginas/home" style="margin-left: 20px;"/>
		</td>
	</tr>
	</table>
	</div>
	<div align="center" style="float: right;">
		<h:form id="user">
			<table>
				<tr>
					<td><p:menubar autoDisplay="false"
							rendered="#{currentSession.logged}" >
							<p:submenu label="Candidato">
								<p:menuitem value="Minhas Candidaturas" icon="ui-icon-search"
									url="http://www.google.com.br" />
								<p:separator/>
								<p:menuitem value="Editar perfil" outcome="/testes/editarperfil" />
								<p:menuitem value="Alterar password" outcome="/testes/mudarpassword" />
							</p:submenu>
							<p:menuitem value="Sair" action="#{login.logout()}" />
						</p:menubar></td>
					<td align="center">
						<h4>
							Olá #{currentSession.userFirstName}! <br />
							<p:commandLink value="Inicie Sessão"
								rendered="#{!currentSession.logged}"
								onclick="PF('loginWindow').show();" title="login" />
							<p:outputLabel value=" ou " rendered="#{!currentSession.logged}" />
							<p:commandLink value="Registe-se"
								rendered="#{!currentSession.logged}"
								action="/paginas/novocandidato?faces-redirect=true" />
						</h4>
					</td>
				</tr>
			</table>
		</h:form>
	</div>
	</header>
	<p:messages closable="true" id="status" autoUpdate="true"
		globalOnly="true" />

	<div id="conteudo" style="min-height: 500px;">
		<ui:insert name="corpo" />
	</div>

	<p:separator style="margin-top: 20px" />

	<footer> Desenvolvido por Nuno Moreira e Rita Costa </footer>
	<h:form>
		<p:dialog header="Login" modal="true" resizable="false"
			widgetVar="loginWindow">
			<p:messages autoUpdate="true" for="login" />
			<h:panelGrid columns="2" styleClass="grid-login">

				<p:outputLabel value="Login" for="login" />
				<p:inputText size="30" id="login" value="#{login.login}"
					required="true" label="Login" />

				<p:outputLabel value="Password" for="password" />
				<p:password size="30" id="password" value="#{login.password}"
					required="true" />

				<f:facet name="footer">
					<p:commandButton value="Login" action="#{login.login()}"
						oncomplete="handleLoginRequest(xhr, status, args)" update="user" />
				</f:facet>
			</h:panelGrid>
		</p:dialog>
	</h:form>

</h:body>
</html>