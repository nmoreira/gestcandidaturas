<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<h:body>

<h:form id="lista">
<p:outputLabel value="Nome do guião" for="nomeguiao"/>
<p:inputText id="nomeguiao" value="#{novoGuiao.nomeGuiao}"/>

<p:dataTable id="guiao" value="#{novoGuiao.novoGuiao.questoes}" var="questao">
	<p:column headerText="Nº">
		<p:inputText size="2" value="#{questao.ordem}"/>
	</p:column>
	<p:column headerText="Pergunta">
		<h:outputText value="#{questao.pergunta}" />
	</p:column>
	<p:column headerText="Tipo de pergunta">
		<h:outputText value="#{questao.tipo.valor}" />
	</p:column>
	<p:column>
		<p:commandButton value="remov" update="guiao" action="#{novoGuiao.removeQuestao(questao)}"/>
	</p:column>
</p:dataTable>
<p:commandButton value="Guardar guião" action="#{novoGuiao.gravaGuiao()}"/>
<p:commandButton value="Nova Pergunta" onclick="PF('novapergunta').show();" process="@none"/>
	</h:form>

<p:dialog id="np" widgetVar="novapergunta" modal="true" dynamic="true">
	<h:form>
	
		<p:outputLabel value="Tipo de questão" for="tipo" />
		<p:selectOneMenu id="tipo" required="true"
			value="#{novoGuiao.tipoQuestao}">
			<f:selectItem itemValue="0" itemLabel="outro" />
			<f:selectItems value="#{novoGuiao.tiposDeQuestoes}" var="tipo"
				itemValue="#{tipo}" itemLabel="#{tipo.valor}"/>
			<p:ajax event="change" update="opcao" />
		</p:selectOneMenu>
		<br 	/>
		<h:panelGroup id="opcao">
			<h:panelGroup rendered="#{novoGuiao.tipoQuestao.equals('LIVRE')}">
				<p:outputLabel value="Texto da pergunta:" for="perguntaTL" />
				<p:inputText id="perguntaTL" value="#{novoGuiao.pergunta}" />
				<br />
				<p:inputTextarea value="Caixa de texto que conterá a resposta"
					disabled="true" rows="4" cols="30" />
				<br />
				<p:commandButton value="Gravar pergunta" action="#{novoGuiao.gravarPerguntaTextoLivre()}" 
					update=":lista:guiao :np" oncomplete="PF('novapergunta').hide();"/>
			</h:panelGroup>
			
			<h:panelGroup rendered="#{novoGuiao.tipoQuestao.equals('ESCALA_1_5')}">
				<p:outputLabel value="Texto da pergunta:" for="perguntaE" />
				<p:inputText id="perguntaE" value="#{novoGuiao.pergunta}" />
				<br />
				<p:selectOneRadio disabled="true">
					<f:selectItem itemLabel="1" itemValue="1"/>
					<f:selectItem itemLabel="2" itemValue="2"/>
					<f:selectItem itemLabel="3" itemValue="3"/>
					<f:selectItem itemLabel="4" itemValue="4"/>
					<f:selectItem itemLabel="5" itemValue="5"/>
				</p:selectOneRadio>
				<br />
				<p:commandButton value="Gravar pergunta" action="#{novoGuiao.gravarPerguntaEscala1a5()}" 
					update=":lista:guiao :np" oncomplete="PF('novapergunta').hide();"/>
			</h:panelGroup>
			
			<h:panelGroup rendered="#{novoGuiao.tipoQuestao.equals('SIM_NAO')}">
				<p:outputLabel value="Texto da pergunta:" for="perguntaSN" />
				<p:inputText id="perguntaSN" value="#{novoGuiao.pergunta}" />
				<br />
				<p:selectOneRadio disabled="true">
					<f:selectItem itemLabel="Sim" itemValue="Sim"/>
					<f:selectItem itemLabel="Não" itemValue="Não"/>
				</p:selectOneRadio>
				<br />
				<p:commandButton value="Gravar pergunta" action="#{novoGuiao.gravarPerguntaSimNao()}" 
					update=":lista:guiao :np" oncomplete="PF('novapergunta').hide();"/>
			</h:panelGroup>
		</h:panelGroup>
	</h:form>
</p:dialog>

</h:body>
</html>
